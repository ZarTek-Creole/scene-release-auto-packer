---
name: ui-components-design
description: R√®gles strictes pour Composants UI - Structure, Props, √âtats, Accessibilit√© selon Design System
globs:
  - "**/*.{ts,tsx,js,jsx}"
---

# UI Components Design - eBook Scene Packer v2

## üéØ Principe Fondamental

**Tous les composants UI DOIVENT suivre strictement le Design System** document√© dans `docs/DESIGN_SYSTEM_UI_UX.md` et la r√®gle `design-system-ui-ux.mdc`.

---

## üèóÔ∏è Structure Composants

### Format Standard

```tsx
// ‚úÖ Bon : Composant selon Design System
import React from 'react';
import { PlusIcon } from 'bootstrap-icons-react';
import './Button.css';  // Styles selon Design System

interface ButtonProps {
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'link';
  size?: 'sm' | 'md' | 'lg';
  icon?: React.ReactNode;
  iconPosition?: 'left' | 'right';
  disabled?: boolean;
  loading?: boolean;
  onClick?: () => void;
  children: React.ReactNode;
  'aria-label'?: string;
}

export const Button: React.FC<ButtonProps> = ({
  variant = 'primary',
  size = 'md',
  icon,
  iconPosition = 'left',
  disabled = false,
  loading = false,
  onClick,
  children,
  'aria-label': ariaLabel,
}) => {
  return (
    <button
      className={`btn btn-${variant} btn-${size}`}
      disabled={disabled || loading}
      onClick={onClick}
      aria-label={ariaLabel || (typeof children === 'string' ? children : undefined)}
      aria-busy={loading}
    >
      {loading && <SpinnerIcon className="icon-sm" />}
      {icon && iconPosition === 'left' && <span className="icon-left">{icon}</span>}
      {children}
      {icon && iconPosition === 'right' && <span className="icon-right">{icon}</span>}
    </button>
  );
};
```

### R√®gles Structure

1. **TypeScript strict** : Tous props typ√©s, pas de `any`
2. **Props Interface** : Interface d√©di√©e avec `Props` suffix
3. **Default Props** : Valeurs par d√©faut coh√©rentes avec Design System
4. **Accessibilit√©** : ARIA labels, roles, √©tats ARIA
5. **Styles** : Classes CSS selon Design System (variables CSS)

---

## üé® Composants Principaux

### Button

**Variantes** :
- `primary` : Action principale (bleu Bootstrap)
- `secondary` : Action secondaire (gris)
- `outline` : Bordure, fond transparent
- `ghost` : Pas de bordure, fond au hover
- `link` : Style lien

**Tailles** :
- `sm` : Padding `0.375rem 0.75rem`, font-size `0.875rem`
- `md` : Padding `0.625rem 1.25rem`, font-size `1rem` - **D√âFAUT**
- `lg` : Padding `0.75rem 1.5rem`, font-size `1.125rem`

**√âtats** :
- `disabled` : Opacity 0.65, cursor not-allowed
- `loading` : Spinner affich√©, disabled automatique

### Input

**Props** :
- `type` : text, email, password, number, etc.
- `placeholder` : Texte placeholder
- `error` : Message d'erreur affich√©
- `icon` : Ic√¥ne Bootstrap Icons (optionnel)
- `required` : Champ requis (ast√©risque)
- `aria-describedby` : Lien vers help/error text

**Validation** :
- Affichage erreur : Rouge, ic√¥ne erreur
- Help text : Gris, ic√¥ne info
- Border rouge si erreur

### Card

**Structure** :
- `CardHeader` : Titre, sous-titre, actions
- `CardBody` : Contenu principal
- `CardFooter` : Actions, boutons

**Styles** :
- Border radius : `var(--border-radius-lg)`
- Border : `var(--border-width) var(--border-style) var(--border-color)`
- Box shadow : `var(--shadow-sm)` (hover : `var(--shadow-md)`)
- Padding : `var(--spacing-6)`

### Tabs

**Structure** :
- `TabList` : Liste onglets avec ic√¥nes
- `Tab` : Onglet individuel (aria-selected, aria-controls)
- `TabPanels` : Conteneur panels
- `TabPanel` : Panel contenu (aria-labelledby)

**Accessibilit√©** :
- `role="tablist"` sur TabList
- `role="tab"` sur Tab
- `role="tabpanel"` sur TabPanel
- `aria-selected`, `aria-controls`, `aria-labelledby`

---

## üéØ NFO Viewer (Composant Sp√©cial)

**Sp√©cifique au projet** : Visualisation fichiers NFO Scene

```tsx
interface NFOViewerProps {
  content: string;
  lineNumbers?: boolean;
  maxWidth?: number;  // 80 colonnes par d√©faut
  theme?: 'light' | 'dark';
}

export const NFOViewer: React.FC<NFOViewerProps> = ({
  content,
  lineNumbers = false,
  maxWidth = 80,
  theme = 'light',
}) => {
  return (
    <pre
      className="nfo-viewer"
      style={{
        fontFamily: 'var(--font-family-monospace)',
        fontSize: 'var(--font-size-sm)',
        maxWidth: `${maxWidth}ch`,
      }}
    >
      {content}
    </pre>
  );
};
```

**Styles** :
- Font : `var(--font-family-monospace)`
- Font size : `var(--font-size-sm)` (14px)
- Line height : `var(--line-height-tight)` (1.25)
- Background : `var(--bg-secondary)`
- Border : `var(--border-width) var(--border-style) var(--border-color)`
- Border radius : `var(--border-radius)`
- White-space : `pre-wrap`
- Max width : 80 colonnes (ASCII Scene standard)

---

## üé® Progress Bar

**Props** :
- `value` : Valeur actuelle (0-100)
- `max` : Valeur maximale (d√©faut 100)
- `label` : Label visible
- `showPercentage` : Afficher pourcentage

**Styles** :
- Background : `var(--bg-tertiary)`
- Fill : `var(--color-primary)`
- Border radius : `var(--border-radius-full)` (pill)
- Height : `1.25rem`
- Transition : `var(--transition-normal)`

---

## ‚ôø Accessibilit√© Obligatoire

### Contraste Couleurs
- ‚úÖ Texte normal : Ratio ‚â• 4.5:1
- ‚úÖ Texte large (18px+) : Ratio ‚â• 3:1
- ‚úÖ √âl√©ments interactifs : Ratio ‚â• 3:1

### Focus Visible
```css
/* ‚úÖ Obligatoire : Focus visible */
*:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}
```

### ARIA Labels
```tsx
// ‚úÖ Bon : ARIA labels pr√©sents
<Button
  aria-label="Ajouter une nouvelle release"
  aria-busy={loading}
>
  <PlusIcon aria-hidden="true" />
  Ajouter
</Button>

// ‚ùå √âviter : Pas d'ARIA
<button onClick={handleClick}>
  <PlusIcon />
</button>
```

### Navigation Clavier
- ‚úÖ Tab order logique
- ‚úÖ Skip links pour navigation principale
- ‚úÖ √âv√©nements clavier (Enter, Space, Escape)

---

## üö´ Anti-Patterns

### ‚ùå Props Non Typ√©s
```tsx
// ‚ùå Mauvais
export const Button = (props: any) => {
  // ...
};

// ‚úÖ Bon
interface ButtonProps {
  variant: 'primary' | 'secondary';
  // ...
}
export const Button: React.FC<ButtonProps> = (props) => {
  // ...
};
```

### ‚ùå Styles Inline Hardcod√©s
```tsx
// ‚ùå Mauvais
<div style={{ padding: '20px', backgroundColor: '#fff' }}>

// ‚úÖ Bon
<div className="card" style={{ padding: 'var(--spacing-8)' }}>
```

### ‚ùå Composants Sans Accessibilit√©
```tsx
// ‚ùå Mauvais
<button onClick={handleClick}>
  <Icon />
</button>

// ‚úÖ Bon
<button
  onClick={handleClick}
  aria-label="Action description"
>
  <Icon aria-hidden="true" />
</button>
```

---

## üìö R√©f√©rences

- **Design System** : `docs/DESIGN_SYSTEM_UI_UX.md` ‚≠ê
- **R√®gle Design System** : `.cursor/rules/design-system-ui-ux.mdc`
- **Bootstrap Icons** : https://icons.getbootstrap.com/

---

**Derni√®re mise √† jour** : 2025-11-01  
**Version** : 1.0.0  
**Priorit√©** : CRITIQUE ‚ö†Ô∏è
