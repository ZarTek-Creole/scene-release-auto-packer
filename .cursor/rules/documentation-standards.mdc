---
alwaysApply: true
---
---
name: documentation-standards
description: Standards de documentation pour le projet v2
globs:
  - "**/*.{py,js,jsx,ts,tsx,md}"
---

# Documentation Standards - eBook Scene Packer v2

## üéØ Objectif

Assurer documentation compl√®te, coh√©rente et √† jour pour faciliter maintenance et collaboration.

---

## üìù Documentation Code

### Python Docstrings

**Style** : Google style

```python
def process_release(
    file_path: Path,
    group: str,
    release_type: str
) -> dict[str, Any]:
    """Process a release file and return metadata.
    
    This function analyzes a release file, extracts metadata,
    and prepares it for packaging according to Scene rules.
    
    Args:
        file_path: Path to the release file to process.
        group: Scene group name for the release.
        release_type: Type of release (TV, EBOOK, DOCS).
        
    Returns:
        Dictionary containing:
            - metadata: Extracted metadata
            - media_info: MediaInfo data (if applicable)
            - validation: Validation results
            
    Raises:
        FileNotFoundError: If file_path does not exist.
        ValueError: If release_type is invalid.
        
    Example:
        >>> result = process_release(
        ...     Path('release.epub'),
        ...     'TestGroup',
        ...     'EBOOK'
        ... )
        >>> 'metadata' in result
        True
    """
    # Implementation...
```

### JavaScript/TypeScript JSDoc

```javascript
/**
 * Processes a release file and returns metadata.
 *
 * @param {File} file - The release file to process.
 * @param {string} group - Scene group name.
 * @param {string} releaseType - Type of release (TV, EBOOK, DOCS).
 * @returns {Promise<ReleaseMetadata>} Promise resolving to metadata object.
 * @throws {Error} If file cannot be processed.
 *
 * @example
 * const metadata = await processRelease(file, 'TestGroup', 'EBOOK');
 * console.log(metadata.title);
 */
async function processRelease(file, group, releaseType) {
  // Implementation...
}
```

### TypeScript Types/Interfaces

```typescript
/**
 * Metadata extracted from a release file.
 */
interface ReleaseMetadata {
  /** Release title. */
  title: string;
  
  /** Release author (if applicable). */
  author?: string;
  
  /** Release year. */
  year: number;
  
  /** Additional metadata. */
  additional: Record<string, unknown>;
}
```

---

## üìö Documentation Projet

### Structure Documentation

```
docs/
‚îú‚îÄ‚îÄ cdc.md                    # Cahier des charges
‚îú‚îÄ‚îÄ DEVBOOK.md                # Suivi phases/√©tapes
‚îú‚îÄ‚îÄ todolist.md               # TodoList d√©taill√©e
‚îú‚îÄ‚îÄ PRDs/                     # Product Requirement Documents
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ PRD-001-Interface-Admin.md
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ BACKLOG_AGILE.md          # Backlog Agile
‚îú‚îÄ‚îÄ PROJECT_OVERVIEW.md       # Vue d'ensemble projet
‚îú‚îÄ‚îÄ TEST_PLAN.md              # Plan de tests
‚îú‚îÄ‚îÄ RISKS_REGISTER.md         # Registre risques
‚îî‚îÄ‚îÄ DEPLOYMENT_PLAN.md        # Plan d√©ploiement
```

---

## üìã Format PRD (Product Requirement Document)

### Structure Standardis√©e

```markdown
# PRD-XXX : Nom Fonctionnalit√©

**ID** : PRD-XXX
**Version** : X.Y.Z
**Date** : YYYY-MM-DD
**Statut** : Draft | Review | Approved | Deprecated
**Auteur** : Nom

---

## Vue d'Ensemble
[Description fonctionnalit√©, objectifs, utilisateurs cibles]

## User Stories
[User Stories d√©taill√©es avec crit√®res d'acceptation]

## D√©tails Fonctionnels
[Sc√©narios, flux utilisateur, contraintes]

## Contraintes Techniques
[API, d√©pendances, limitations]

## Crit√®res de R√©ussite
[Fonctionnels, performance, qualit√©]

## Tests (TDD)
[Tests unitaires, int√©gration, E2E n√©cessaires]

## Priorit√© MoSCoW
[Must Have | Should Have | Could Have | Won't Have]

## D√©pendances
[PRDs li√©s, phases pr√©c√©dentes]
```

---

## üìñ Format DEVBOOK

### Mise √† Jour Obligatoire

**√Ä mettre √† jour** :
- ‚úÖ √Ä chaque √©tape compl√©t√©e
- ‚úÖ √Ä chaque phase compl√©t√©e
- ‚úÖ Lors changement priorit√©
- ‚úÖ Lors modification OKRs

**Format** :

```markdown
### Phase X : Nom Phase ‚è≥

**Statut** : üü° En cours  
**Priorit√© MoSCoW** : Must Have  
**Date d√©but** : YYYY-MM-DD  
**Date fin estim√©e** : YYYY-MM-DD

#### √âtapes

##### √âtape X.Y : Nom √âtape
- **Description** : ...
- **Crit√®res de validation** : ...
- **Tests n√©cessaires** : ...
- **Statut** : ‚úÖ Termin√©e | üü° En cours | ‚è≥ Non commenc√©e
```

---

## üìù Format TodoList

### Structure D√©taill√©e

```markdown
### Phase X : Nom (estimation)

### √âtape X.Y : Nom

**Statut** : ...
**Priorit√©** : ...
**Estimation** : ...
**D√©pendances** : ...

#### Sous-√©tapes

##### X.Y.Z : Nom Sous-√©tape
- ‚è≥ T√¢che 1
- ‚è≥ T√¢che 2
- ‚úÖ T√¢che 3 (termin√©e)

**Crit√®res de validation** : ...
```

---

## üîÑ R√®gles de Mise √† Jour

### Code
- **Docstrings** : Mettre √† jour si signature change
- **Comments** : Mettre √† jour si logique change
- **Type hints** : Mettre √† jour si types changent

### Documentation Projet

#### DEVBOOK
- **Quand** : √Ä chaque √©tape compl√©t√©e
- **Quoi** : Marquer √©tape comme termin√©e, mettre √† jour statistiques
- **Comment** : Changer `‚è≥ Non commenc√©e` ‚Üí `‚úÖ Termin√©e`

#### PRDs
- **Quand** : Modification fonctionnalit√© majeure
- **Quoi** : Mettre √† jour section concern√©e, incr√©menter version
- **Comment** : Version X.Y.Z ‚Üí X.Y+1.0 si modification, X.Y.Z+1 si correction

#### TodoList
- **Quand** : √Ä chaque sous-√©tape compl√©t√©e
- **Quoi** : Marquer t√¢che comme termin√©e (‚úÖ)
- **Comment** : Changer `- ‚è≥` ‚Üí `- ‚úÖ`

#### Risks Register
- **Quand** : Nouveau risque identifi√©, statut change
- **Quoi** : Ajouter risque, mettre √† jour statut
- **Comment** : Ajouter entr√©e, mettre √† jour date r√©vision

---

## ‚úÖ Checklist Documentation

### Avant Commit Code
- [ ] Docstrings pr√©sents (fonctions/classes)
- [ ] Type hints pr√©sents (Python)
- [ ] Comments explicatifs si logique complexe
- [ ] Pas de code comment√© (supprimer ou documenter pourquoi)

### Avant Merge Feature
- [ ] DEVBOOK mis √† jour (si √©tape compl√©t√©e)
- [ ] PRD mis √† jour (si fonctionnalit√© modifi√©e)
- [ ] TodoList mise √† jour (si t√¢ches compl√©t√©es)
- [ ] README mis √† jour (si structure change)

### Avant Release
- [ ] Documentation compl√®te et coh√©rente
- [ ] Liens entre documents fonctionnels
- [ ] Pas de sections "TODO" ou "√Ä compl√©ter"
- [ ] Exemples √† jour

---

## üö´ Anti-Patterns

### ‚ùå Documentation Obsol√®te
```markdown
# ‚ùå Mauvais : Documentation non mise √† jour
def old_function():
    """This function does X."""  # Mais fait Y maintenant
    # Implementation Y
```

### ‚ùå Documentation Vague
```python
# ‚ùå Mauvais : Pas assez d√©taill√©
def process(data):
    """Process data."""
    # ...

# ‚úÖ Bon : D√©tails clairs
def process_release_metadata(
    file_path: Path,
    release_type: str
) -> ReleaseMetadata:
    """Extract and validate metadata from release file.
    
    Args:
        file_path: Path to release file (EPUB, PDF, etc.)
        release_type: Type of release (TV, EBOOK, DOCS)
        
    Returns:
        ReleaseMetadata object with extracted data.
    """
```

### ‚ùå Documentation Redondante
```python
# ‚ùå Mauvais : Commentaire redondant avec code
def add(a, b):
    # Adds a and b together
    return a + b

# ‚úÖ Bon : Docstring utile, pas de commentaire redondant
def calculate_total(items: list[Item]) -> float:
    """Calculate total price including taxes.
    
    Args:
        items: List of items with price and tax_rate.
        
    Returns:
        Total price including all taxes.
    """
    return sum(item.price * (1 + item.tax_rate) for item in items)
```

---

## üîó Liens Utiles

- **CDC** : `docs/cdc.md`
- **DEVBOOK** : `docs/DEVBOOK.md`
- **PRDs** : `docs/PRDs/`
- **Test Plan** : `docs/TEST_PLAN.md`
- **MCP Tools Guide** : `docs/MCP_TOOLS_GUIDE.md` ‚≠ê

---

**Derni√®re mise √† jour** : 2025-11-01  
**Version** : 1.0.0
